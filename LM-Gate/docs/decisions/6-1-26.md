## Issue Summary: CLI Upload stopped working after moving to VPS

### What worked before
- CLI و Server كانوا على نفس الجهاز
- الاتصال عبر `localhost`
- بدون فصل بين البيئات
- upload كان يشتغل بدون مشاكل

### What changed
- نقلت السيرفر إلى VPS باستخدام Docker
- أضفت ملف `.env`
- عدّلت `upload.go` ليعتمد على `LM_API_URL`
- صار في بيئتين مختلفتين:
  - CLI (local machine)
  - Server (Docker on VPS)

### Root Cause
- ملف `.env` يُقرأ فقط داخل Docker (السيرفر)
- CLI لا يقرأ `.env` تلقائيًا
- CLI اعتمد على `os.Getenv` بدون إعداد واضح
- fallback على `localhost` سبب لخبطة
- النتيجة: CLI حاول يرفع على `localhost` بدل السيرفر

### Why this is normal
- الانتقال من Local → Production
- اختلاف البيئات (CLI ≠ Server)
- فصل الإعدادات كشف مشكلة كانت مخفية سابقًا

### Key Lesson
- `.env` غير مشترك بين CLI و Server
- CLI يحتاج إعداد مستقل (config / flag / env خاص)
- لازم فصل واضح بين:
  - Tool (CLI)
  - Service (Server)

### Status
- المشكلة طبيعية
- ناتجة عن اختلاف البيئات
- ليست خطأ برمجي أساسي


-------------
قبل

الـ CLI والسيرفر على نفس الجهاز

الاتصال عبر localhost

رفع ملفات PCAP يشتغل بدون مشاكل

التغيير

نقل السيرفر إلى VPS باستخدام Docker

إضافة ملف .env

تعديل upload.go للاعتماد على LM_API_URL

صار في فصل بين:

CLI (جهازك)

Server (VPS + Docker)

المشكلة

ملف .env يُقرأ فقط داخل Docker (السيرفر)

الـ CLI لا يقرأ .env تلقائيًا

عند عدم وجود LM_API_URL:

الـ CLI يرجع لـ localhost

النتيجة:

الطلبات تروح لمكان غلط

أخطاء اتصال / 400 / timeout

الحل

فصل الإعدادات بين CLI و Server

جعل الـ CLI يقرأ:

LM_API_URL من environment بشكل صريح

اختبار الاتصال مع سيرفر حقيقي (IP عام)

قبول أن رفع ملفات كبيرة يحتاج وقت (شبكة + مسافة)

لماذا هذا طبيعي؟

انتقال من Local → Production

اختلاف البيئات كشف مشكلة كانت مخفية

هذا يحدث في كل الأنظمة الحقيقية

الدرس المهم

.env ليس مشتركًا تلقائيًا

CLI = أداة مستقلة

Server = خدمة مستقلة

الفصل بينهم تصميم صحيح وليس خطأ

الحالة الآن

السيرفر يستقبل الملفات

الرفع يعمل (حتى لو ببطء)

تنظيف البيانات بعد المعالجة لتقليل المخاطر ✔️